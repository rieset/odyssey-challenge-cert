<div class="listing container"
     *ngIf="certs.data$ | async as list; else loadingOrErrorTemplate">

    <div class="listing__cards">
        <div class="listing__card"
             *ngFor="let entity of list;let i = index; trackBy: trackByFn"
             (click)="setCurrentCard(i)"
        >
            <div class="listing__card-header">
                <div class="listing__card-title">{{entity?.title?.value}}</div>
                <div class="listing__card-desc">
                    <span>{{entity?.author?.value}}</span>

                    <ng-container *ngIf="entity?.company">
                        <span> {{ 'app.labels.in' | transloco }} </span>
                        <span [ngSwitch]="!!entity?.link">
                          <ng-template [ngSwitchCase]="true">
                            <a rel="noreferrer, nofolloww" target="_blank"
                               [attr.href]="entity?.link?.value">{{ entity?.company?.value }}</a>
                          </ng-template>
                          <ng-template ngSwitchDefault>
                            <span>{{ entity?.company?.value }}</span>
                          </ng-template>
                        </span>
                    </ng-container>
                </div>
            </div>
            <div class="listing__card-status">
                {{'listing.status.' + (entity?.status?.value || 'no_status') | transloco}}
            </div>
        </div>
    </div>

    <div class="listing__view" *ngIf="view$ | async as view">
        <div [innerHTML]="view?.description?.value | safeHtml"></div>
    </div>
</div>

<ng-template #loadingOrErrorTemplate>
    <ng-container *ngIf="certs.error$ | async; else loading">
        List is a empty
        <!-- <div class="listing__error"></div> -->
    </ng-container>
</ng-template>

<ng-template #loading>
    Loading...
    <!-- <div class="listing__loader"></div> -->
</ng-template>
